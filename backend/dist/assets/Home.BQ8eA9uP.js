import{a as b}from"./app.CusJVMsI.js";import{a as A}from"./ad.CS18M8yU.js";import{_ as C,o as x,a as n,c,b as t,d as r,w as i,F as d,r as _,e as p,f as h,g as $,t as a,h as B}from"./index.BCp--acD.js";import"./index.D9AvatZ4.js";const N={class:"home-container"},D={class:"banner-section"},F=["href"],H=["src","alt"],L={key:1,class:"banner-video"},V=["src"],U=["href"],E=["href"],I={class:"recommended-section"},M={class:"app-grid"},P={class:"app-icon"},S=["src","alt"],j={class:"app-info"},q={class:"app-name"},z={class:"app-version"},G={class:"app-stats"},J={class:"download-count"},K={class:"rating"},O={class:"latest-section"},Q={class:"app-grid"},R={class:"app-icon"},T=["src","alt"],W={class:"app-info"},X={class:"app-name"},Y={class:"app-version"},Z={class:"app-stats"},ss={class:"download-count"},ts={class:"rating"},es={__name:"Home",setup(os){const m=p([]),u=p([]),v=p([]),f=e=>e>=1e4?(e/1e4).toFixed(1)+"万":e,k=async()=>{try{const e=await A.getAdsByPosition("home");m.value=e}catch(e){console.error("获取首页广告失败:",e)}},y=async()=>{try{const e=await b.getAppList();u.value=[...e].sort((o,l)=>(l.downloadCount||0)-(o.downloadCount||0)).slice(0,6),v.value=[...e].sort((o,l)=>new Date(l.createdAt)-new Date(o.createdAt)).slice(0,6)}catch(e){console.error("获取应用列表失败:",e)}};return x(()=>{k(),y()}),(e,o)=>{const l=h("el-carousel-item"),w=h("el-carousel"),g=h("router-link");return n(),c("div",N,[t("section",D,[r(w,{interval:5e3,type:"card",height:"400px"},{default:i(()=>[(n(!0),c(d,null,_(m.value,s=>(n(),$(l,{key:s.id},{default:i(()=>[s.type==="image"?(n(),c("a",{key:0,href:s.link,target:"_blank",class:"banner-link"},[t("img",{src:`http://localhost:3001${s.mediaUrl}`,alt:s.title,class:"banner-image"},null,8,H)],8,F)):s.type==="video"?(n(),c("div",L,[t("video",{src:`http://localhost:3001${s.mediaUrl}`,autoplay:"",loop:"",muted:"",playsinline:""}," 您的浏览器不支持视频播放 ",8,V),t("a",{href:s.link,target:"_blank",class:"banner-overlay"},a(s.title),9,U)])):s.type==="web"?(n(),c("a",{key:2,href:s.link,target:"_blank",class:"banner-web"},[t("h3",null,a(s.title),1),o[0]||(o[0]=t("p",null,"点击访问",-1))],8,E)):B("",!0)]),_:2},1024))),128))]),_:1})]),t("section",I,[o[1]||(o[1]=t("h2",{class:"section-title"},"推荐应用",-1)),t("div",M,[(n(!0),c(d,null,_(u.value,s=>(n(),c("div",{key:s.id,class:"app-card"},[r(g,{to:`/app/${s.id}`,class:"app-link"},{default:i(()=>[t("div",P,[t("img",{src:`http://localhost:3001${s.icon}`,alt:s.name},null,8,S)]),t("div",j,[t("h3",q,a(s.name),1),t("p",z,"v"+a(s.versionName),1),t("div",G,[t("span",J,a(f(s.downloadCount))+" 下载",1),t("span",K,a(s.rating||0)+" ★",1)])])]),_:2},1032,["to"])]))),128))])]),t("section",O,[o[2]||(o[2]=t("h2",{class:"section-title"},"最新上传",-1)),t("div",Q,[(n(!0),c(d,null,_(v.value,s=>(n(),c("div",{key:s.id,class:"app-card"},[r(g,{to:`/app/${s.id}`,class:"app-link"},{default:i(()=>[t("div",R,[t("img",{src:`http://localhost:3001${s.icon}`,alt:s.name},null,8,T)]),t("div",W,[t("h3",X,a(s.name),1),t("p",Y,"v"+a(s.versionName),1),t("div",Z,[t("span",ss,a(f(s.downloadCount))+" 下载",1),t("span",ts,a(s.rating||0)+" ★",1)])])]),_:2},1032,["to"])]))),128))])])])}}},is=C(es,[["__scopeId","data-v-5507b143"]]);export{is as default};
