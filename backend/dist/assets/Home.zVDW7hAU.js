import{a as $}from"./app.B2tPatVd.js";import{a as C}from"./ad.dXGxTie5.js";import{A as l}from"./index.CnCq3VPH.js";import{_ as x,o as B,a as n,c,b as e,d as _,w as r,F as p,r as m,e as u,f as h,g as N,u as d,t as a,h as D}from"./index.DF3behv_.js";const L={class:"home-container"},F={class:"banner-section"},H=["href"],U=["src","alt"],V={key:1,class:"banner-video"},E=["src"],I=["href"],P=["href"],S={class:"recommended-section"},M={class:"app-grid"},R={class:"app-icon"},j=["src","alt"],q={class:"app-info"},z={class:"app-name"},G={class:"app-version"},J={class:"app-stats"},K={class:"download-count"},O={class:"rating"},Q={class:"latest-section"},T={class:"app-grid"},W={class:"app-icon"},X=["src","alt"],Y={class:"app-info"},Z={class:"app-name"},ss={class:"app-version"},es={class:"app-stats"},ts={class:"download-count"},os={class:"rating"},ns={__name:"Home",setup(as){const v=u([]),f=u([]),g=u([]),k=t=>t>=1e4?(t/1e4).toFixed(1)+"万":t,w=async()=>{try{const t=await C.getAdsByPosition("home");v.value=t}catch(t){console.error("获取首页广告失败:",t)}},A=async()=>{try{const t=await $.getAppList();f.value=[...t].sort((o,i)=>(i.downloadCount||0)-(o.downloadCount||0)).slice(0,6),g.value=[...t].sort((o,i)=>new Date(i.createdAt)-new Date(o.createdAt)).slice(0,6)}catch(t){console.error("获取应用列表失败:",t)}};return B(()=>{w(),A()}),(t,o)=>{const i=h("el-carousel-item"),b=h("el-carousel"),y=h("router-link");return n(),c("div",L,[e("section",F,[_(b,{interval:5e3,type:"card",height:"400px"},{default:r(()=>[(n(!0),c(p,null,m(v.value,s=>(n(),N(i,{key:s.id},{default:r(()=>[s.type==="image"?(n(),c("a",{key:0,href:s.link,target:"_blank",class:"banner-link"},[e("img",{src:`${d(l).replace("/api","")}${s.mediaUrl}`,alt:s.title,class:"banner-image"},null,8,U)],8,H)):s.type==="video"?(n(),c("div",V,[e("video",{src:`${d(l).replace("/api","")}${s.mediaUrl}`,autoplay:"",loop:"",muted:"",playsinline:""}," 您的浏览器不支持视频播放 ",8,E),e("a",{href:s.link,target:"_blank",class:"banner-overlay"},a(s.title),9,I)])):s.type==="web"?(n(),c("a",{key:2,href:s.link,target:"_blank",class:"banner-web"},[e("h3",null,a(s.title),1),o[0]||(o[0]=e("p",null,"点击访问",-1))],8,P)):D("",!0)]),_:2},1024))),128))]),_:1})]),e("section",S,[o[1]||(o[1]=e("h2",{class:"section-title"},"推荐应用",-1)),e("div",M,[(n(!0),c(p,null,m(f.value,s=>(n(),c("div",{key:s.id,class:"app-card"},[_(y,{to:`/app/${s.id}`,class:"app-link"},{default:r(()=>[e("div",R,[e("img",{src:`${d(l).replace("/api","")}${s.icon}`,alt:s.name},null,8,j)]),e("div",q,[e("h3",z,a(s.name),1),e("p",G,"v"+a(s.versionName),1),e("div",J,[e("span",K,a(k(s.downloadCount))+" 下载",1),e("span",O,a(s.rating||0)+" ★",1)])])]),_:2},1032,["to"])]))),128))])]),e("section",Q,[o[2]||(o[2]=e("h2",{class:"section-title"},"最新上传",-1)),e("div",T,[(n(!0),c(p,null,m(g.value,s=>(n(),c("div",{key:s.id,class:"app-card"},[_(y,{to:`/app/${s.id}`,class:"app-link"},{default:r(()=>[e("div",W,[e("img",{src:`${d(l).replace("/api","")}${s.icon}`,alt:s.name},null,8,X)]),e("div",Y,[e("h3",Z,a(s.name),1),e("p",ss,"v"+a(s.versionName),1),e("div",es,[e("span",ts,a(k(s.downloadCount))+" 下载",1),e("span",os,a(s.rating||0)+" ★",1)])])]),_:2},1032,["to"])]))),128))])])])}}},ds=x(ns,[["__scopeId","data-v-c70316ab"]]);export{ds as default};
